<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dmj.cli.mapper.api.UserCollLogMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.dmj.cli.domain.UserCollLog">
        <id column="id" property="id" />
        <result column="user_id" property="userId" />
        <result column="collect_id" property="collectId" />
        <result column="collect_type" property="collectType" />
        <result column="collect_time" property="collectTime" />
    </resultMap>


    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, user_id, collect_id, collect_type, collect_time
    </sql>
    <select id="listCollectInfos" resultType="com.dmj.cli.domain.vo.api.CollectInfoVO">
        select r.id as id,r.title as title,cl.collect_type as type,r.resources_desc as collDesc,cl.collect_time as time,r.cover_url as coverUrl
        from user_coll_log cl left join resources r on cl.collect_id=r.id where cl.user_id=#{userId}
        union
        select c.id as id,c.course_title as title,cl.collect_type as type,c.course_desc as collDesc,cl.collect_time as time,c.cover_url as coverUrl
        from user_coll_log cl left join course c on cl.collect_id=c.id where cl.user_id=#{userId}
    </select>

</mapper>
